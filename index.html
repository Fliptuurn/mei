<!DOCTYPE html>
<!-- https://he0871.github.io/lulu/ -->
<!--2018.5.20 with my love for lulu-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!--<link rel="stylesheet" type="text/css" href="style.css">-->
</head>

<body>
    <header>
        <div class="wrap">
            <div class="signature">
                <img src="signature.PNG" alt="sign">
            </div> 
            
            <div class="profile-img">
                <img src="profile.jpg" alt="img">
            </div>
            
            <div class = "CV">
                <p>University of Maryland  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  2018-2019</p>
                <p>public administration </p>
                <p>Guangdong University of Foreign Studies  &nbsp&nbsp&nbsp 2016-2018</p>
                <p>Advanced English Interpreter </p>
            </div>
            
            <div class = "voice">
                <p> The demo of the translation</p>
                <audio controls="controls">
                    <source src="https://he0871.github.io/lulu/sample1.mp3" type="audio/mp3" />
                    Your browser does not support this audio format.
                </audio>
            </div>
        </div>
    </header>
    <div class="box">
        <h3 class="list_text">University of Maryland</h3>
    </div>
    <button>click</button>
</body>
<script src="segment.min.js"></script>
<script src="d3-ease.v0.6.js"></script>
<script src="letters.js"></script>
<script src="mo.min.js"></script>
<script>
    window.onload=function(){
        var options = [
            {
                size : [100,100,100,100],
                weight : [28,23,18,13],
                color: '#008ad4',
                duration: [1.1,1.2,1.3,1.4],
                delay: 0.05,
                fade: 1.5,
                easing: d3_ease.easeExpInOut.ease
            }
        ];
        var items = [].slice.call(document.querySelectorAll('.box'));
        function init() {
            items.forEach(function(item, pos) {
                var word = item.querySelector('.list_text'),
                    playCtrl=document.getElementsByTagName('button')[0],  //按钮
//                    playCtrl = item.querySelector('button'),
                // initialize the plugin
                    instance = new Letters(word, options[pos]),
                    endPlayCallback = function() {
                        playCtrl.className = 'control__button control__button--play';
                        word.setAttribute('data-state', 'stop');
                    };
                // show word  开始就把文字展现出来，注释掉就是开始为空白
                //instance.showInstantly();
                // moo.js configurations for some of the buttons
                var timelines = {};
                var letters = [].slice.call(word.querySelectorAll('svg')),
                        lettersTotal = letters.length,
                        distanceFactor = 40;
                timelines[pos+1] = new mojs.Timeline();
                letters.forEach(function(letter, i) {
                    var ty = -1 * distanceFactor * (lettersTotal - i);
                    tween = new mojs.Tween({
                        duration : 2000,
                        delay: 50 + 50*i,
                        easing: mojs.easing.elastic.out,
                        onUpdate: function(progress) {
                            letter.style.WebkitTransform = letter.style.transform = 'translate3d(0,' + ty * (1-progress) + '%,0)';
                        }
                    });
                    timelines[pos+1].add(tween);
                });
                playCtrl.addEventListener('click', function() {  //给按钮绑定事件
                    if( word.getAttribute('data-state') === 'play' ) {
                        return false;
                    }
                    word.setAttribute('data-state', 'play');
                    playCtrl.className = 'control__button control__button--play control__button--active';
                    instance.hideInstantly();
                    timelines[pos+1].start();
                    instance.show({callback : endPlayCallback});
                });
            });
        }
        init();
    }
</script>
</html>
    

